replicaCount: 1

webapp:
  image: artyom1996/gqwebapp
  containerPort: 5000
  servicePort: 30080

mongodb:
  image: mongo:latest
  rootUsername: admin
  rootPassword: admin
  storageSize: 10Gi
  mongoPort: 27017

jenkins:
  image: jenkins/jenkins:lts
  servicePort: 8080
  admin:
    username: admin
    password: Aa123456
  installPlugins:
    - kubernetes
    - workflow-aggregator
    - git
    - configuration-as-code
    - gitlab-plugin
    - blueocean
    - workflow-multibranch
    - login-theme
    - prometheus
    - github-oauth
  persistence:
    enabled: true
    size: 8Gi

prometheus:
  server:
    servicePort: 9090
    config:
      prometheus.yml:
        scrape_configs:
          - job_name: 'webapp'
            static_configs:
              - targets: ['webapp-service.default.svc.cluster.local:30080']
          - job_name: 'mongodb-exporter'
            static_configs:
              - targets: [ 'mongodb-exporter.default.svc.cluster.local:9216' ]
          - job_name: 'jenkins'
            static_configs:
              - targets: ['jenkins-service.jenkins.svc.cluster.local:8080']
          - job_name: 'argocd'
            scheme: https
            tls_config:
              insecure_skip_verify: true
            static_configs:
              - targets: [ 'argocd-server.argocd.svc.cluster.local:80' ]

grafana:
  image: grafana/grafana:latest
  servicePort: 3000

ingress:
  enabled: true
  annotations: {}
  ingressClassName: nginx
  hosts:
    - host: guessquest.local
      paths:
        - path: /
          backend:
            serviceName: webapp-service
            servicePort: 30050
        - path: /ci
          backend:
            serviceName: jenkins-service
            servicePort: 30040
        - path: /monitor
          backend:
            serviceName: prometheus-service
            servicePort: 30090
        - path: /observe
          backend:
            serviceName: grafana-service
            servicePort: 30030
  tls: []
